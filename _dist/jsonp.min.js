var app={};app.Framework={},app.Framework.defaults={noop:function(){}},app.Framework.Dom={body:function(){return document.getElementsByTagName("body")[0]}},app.Framework.extendObject=function(a,b){var c=Object.prototype.toString.call({}),d=function(a){return Object.prototype.toString.call(a)===c};for(var e in b)b.hasOwnProperty(e)&&(d(b[e])?(a[e]=a[e]||{},extendObject(a[e],b[e])):a[e]=b[e]);return a},app.Framework.jsonp=function(a){var b={url:void 0,callback:app.Framework.defaults.noop,urlParameters:void 0,responseType:"string"};this.settings={jsonpCallbackName:function(){var a=(new Date).getTime();return"jsonpcallback"+a}(),jsonpCallbackTokenName:"callback",errorMessages:{BAD_PARAMETERS:"jsonp error: options must contain parameter url and callback",URL_LOAD_FAIL:"jsonp Fatal Error while loading url: ",URL_TIMEOUT:"jsonp timeout Error while loading url: "}},this.timeoutTimer=null,app.Framework.extendObject(b,a),app.Framework.extendObject(this.settings,b)},app.Framework.jsonp.prototype={init:function(a){var b=this,c=function(){return void 0!==b.settings.url};if(c()){var d=b.settings.errorMessages.BAD_PARAMETERS;return void a(d,null)}b.completeUrl();var e=b.createScript();a(null,e)},completeUrl:function(){var a=this,b=app.Framework.UrlUtilities.objectToQueryString(a.settings.urlParameters);b.length>0&&(a.settings.url=app.Framework.UrlUtilities.join(a.settings.url,b)),a.settings.url=app.Framework.UrlUtilities.addParameterWithSeparator(a.settings.url,a.settings.jsonpCallbackTokenName,a.settings.jsonpCallbackName)},createScript:function(){var a=this,b=document.createElement("script");return b.type="text/javascript",b.async=!0,b.src=a.settings.url,b},createOnSuccess:function(a){var b=this,c=function(a,c){var d=a;if("string"==b.settings.responseType)return void c(null,d);if("json"===b.settings.responseType)try{d=JSON.parse(a)}catch(e){c("invalid object",null)}};window[b.settings.jsonpCallbackName]=function(a){window[b.settings.jsonpCallbackName]=app.Framework.defaults.noop,window.clearTimeout(b.timeoutTimer);c(a,function(a,c){b.settings.callback(a,c)})}},execute:function(){var a=this;a.init(function(b,c){return b?void a.settings.callback(b,null):(a.createOnSuccess(),a.timeoutTimer=window.setTimeout(function(){window[a.settings.jsonpCallbackName]=app.Framework.defaults.noop;var b=a.settings.errorMessages.URL_TIMEOUT+a.settings.url;a.settings.callback(b,null,a.settings.callerCallback)},2e3),void app.Framework.Dom.body().appendChild(c.script))})}},app.Framework.UrlUtilities={separator:function(a){return/\?/.test(a)?"&":"?"},join:function(a,b){return a+this.separator(a)+b},createAntiCache:function(){var a=(new Date).getTime();return encodeURIComponent("_")+"="+encodeURIComponent(a)},addParameterWithSeparator:function(a,b,c){return a+this.separator(a)+encodeURIComponent(b)+"="+encodeURIComponent(c)},objectToQueryString:function(a,b){var c={addAntiCache:!0},d=(new Date).getTime();app.Framework.extendObject(c,b);var e=[],f=function(a,b){e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};for(var g in a)a.hasOwnProperty(g)&&f(g,a[g]);c.addAntiCache&&f("_",d);var h=e.join("&");return h}};
Jsonp=function(a){var b={url:void 0,callback:Jsonp.Utilities.Defaults.noop,urlParameters:void 0};this.settings={jsonpCallbackName:function(){var a=(new Date).getTime();return"jsonpcallback"+a}(),jsonpCallbackTokenName:"callback",errorMessages:{BAD_PARAMETERS:"jsonp error: options must contain parameter url and callback",URL_LOAD_FAIL:"jsonp Fatal Error while loading url: ",URL_TIMEOUT:"jsonp timeout Error while loading url: "}},this.timeoutTimer=null,Jsonp.Utilities.extendObject(b,a),Jsonp.Utilities.extendObject(this.settings,b)},Jsonp.prototype.completeUrl=function(){var a=this,b=Jsonp.Utilities.Url.objectToQueryString(a.settings.urlParameters);b.length>0&&(a.settings.url=Jsonp.Utilities.Url.join(a.settings.url,b)),a.settings.url=Jsonp.Utilities.Url.addParameterWithSeparator(a.settings.url,a.settings.jsonpCallbackTokenName,a.settings.jsonpCallbackName)},Jsonp.prototype.createOnSuccess=function(){var a=this;window[a.settings.jsonpCallbackName]=function(b){window[a.settings.jsonpCallbackName]=Jsonp.Utilities.Defaults.noop,window.clearTimeout(a.timeoutTimer),a.settings.callback(null,b)}},Jsonp.prototype.createScript=function(){var a=this,b=document.createElement("script");return b.type="text/javascript",b.async=!0,b.src=a.settings.url,b},Jsonp.prototype.execute=function(){var a=this;a.init(function(b,c){if(b)return void a.settings.callback(b,null);a.createOnSuccess(),a.timeoutTimer=window.setTimeout(function(){window[a.settings.jsonpCallbackName]=Jsonp.Utilities.Defaults.noop;var b=a.settings.errorMessages.URL_TIMEOUT+a.settings.url;a.settings.callback(b,null)},2e3);var d=Jsonp.Utilities.Dom.body();d.appendChild(c)})},Jsonp.prototype.init=function(a){var b=this,c=function(){return void 0!==b.settings.url};if(!c()){var d=b.settings.errorMessages.BAD_PARAMETERS;return void a(d,null)}b.completeUrl();var e=b.createScript();a(null,e)},Jsonp.Utilities={},Jsonp.Utilities.Defaults={noop:function(){}},Jsonp.Utilities.Dom={body:function(){return document.getElementsByTagName("body")[0]}},Jsonp.Utilities.extendObject=function(a,b){var c=Object.prototype.toString.call({}),d=function(a){return Object.prototype.toString.call(a)===c};for(var e in b)b.hasOwnProperty(e)&&(d(b[e])?(a[e]=a[e]||{},extendObject(a[e],b[e])):a[e]=b[e]);return a},Jsonp.Utilities.Url={separator:function(a){return/\?/.test(a)?"&":"?"},join:function(a,b){return a+this.separator(a)+b},createAntiCache:function(){var a=(new Date).getTime();return encodeURIComponent("_")+"="+encodeURIComponent(a)},addParameterWithSeparator:function(a,b,c){return a+this.separator(a)+encodeURIComponent(b)+"="+encodeURIComponent(c)},objectToQueryString:function(a,b){var c={addAntiCache:!0},d=(new Date).getTime();Jsonp.Utilities.extendObject(c,b);var e=[],f=function(a,b){e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};for(var g in a)a.hasOwnProperty(g)&&f(g,a[g]);c.addAntiCache&&f("_",d);var h=e.join("&");return h}};